{"title":"SAI-编程库","uid":"9b0cbed62cb3ddeef03b83c99d21ae2c","slug":"笔记/符号人工智能/编程库","date":"2024-10-18T10:00:12.000Z","updated":"2025-11-15T17:58:46.953Z","comments":true,"path":"api/articles/笔记/符号人工智能/编程库.json","keywords":null,"cover":"/img/post/笔记/符号人工智能/编程库/cover.jpg","content":"<p><a href=\"%E7%AC%94%E8%AE%B0%2F%E7%AC%A6%E5%8F%B7%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%2F%E7%AC%A6%E5%8F%B7%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AF%BC%E8%88%AA\">&lt;返回符号人工智能导航</a></p>\n<hr />\n<h1 id=\"一-z3-python库\"><a class=\"markdownIt-Anchor\" href=\"#一-z3-python库\"></a> 一. Z3 python库</h1>\n<h2 id=\"1-安装\"><a class=\"markdownIt-Anchor\" href=\"#1-安装\"></a> 1. 安装</h2>\n<p><code>pip install z3-solver</code></p>\n<h2 id=\"2-使用-smt2-作为z3的输入\"><a class=\"markdownIt-Anchor\" href=\"#2-使用-smt2-作为z3的输入\"></a> 2. 使用 smt2 作为z3的输入</h2>\n<p>smt2作为输入的python样例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">smt2program = &quot;&quot;&quot;</span><br><span class=\"line\">(declare-const A Bool)</span><br><span class=\"line\">(declare-const B Bool)</span><br><span class=\"line\">(assert (and (xor A B) A))</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">import z3</span><br><span class=\"line\"></span><br><span class=\"line\">s = z3.Solver()                           # z3解算器</span><br><span class=\"line\">s.add(z3.parse_smt2_string(smt2program))  # 将smt2解析成约束条件，并添加到解算器中</span><br><span class=\"line\">status = s.check()                        # 获取是否可满足</span><br><span class=\"line\">print(status)                             # 打印可满足状态</span><br><span class=\"line\">if status == z3.sat:                      </span><br><span class=\"line\">  print(s.model())                        # 打印模型</span><br></pre></td></tr></table></figure>\n<p>输出结果：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sat</span><br><span class=\"line\">[A = True, B = False]</span><br></pre></td></tr></table></figure>\n<p>其中变量 <code>smt2program</code> 内容就是smt2的语法：</p>\n<p>smt2 采用 括号前缀表示法 (parenthesised prefix notation)，由最早的函数式编程语言之一 LISP 使用而闻名。在这种表示法中，每对括号都是一个函数调用，括号中的第一个单词是函数名称，其余都是参数。形式如：<code>(&lt;function name&gt; &lt;parameter 1&gt; &lt;parameter 2&gt; ...)</code></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">函数</th>\n<th>描述</th>\n<th>例子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">注释</td>\n<td><code>;</code></td>\n<td><code>; Hello</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>and</code></td>\n<td>逻辑和，可以用两个或多个参数</td>\n<td><code>(and A B C)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>or</code></td>\n<td>逻辑或，可以用两个或多个参数</td>\n<td><code>(or A B C)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>not</code></td>\n<td>逻辑否</td>\n<td><code>(not A)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>=&gt;</code></td>\n<td>推导 (Implication)，即→</td>\n<td><code>(=&gt; A B)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>=</code></td>\n<td>等于，即 ⇐⇒</td>\n<td><code>(= A B)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>declare-const</code></td>\n<td>声明一个变量。第一个参数是变量名称，第二个参数是变量类型</td>\n<td><code>(declare-const A Bool)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>declare-fun</code></td>\n<td>声明一个函数。<br>第一个参数是函数名；<br>第二个参数是一个括号组，内部分别是函数参数类型；<br>第三个参数是返回类型</td>\n<td><code>(declare-fun square (Int Int) Int)</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>declare-datatype</code></td>\n<td>声明一个枚举 (enumeration) 数据类型。<br>第一个参数是数据类型名；<br>第二个参数是一个括号组，其中第一个参数是数据类型名；<br>第二个参数是一个构造函数的括号组，内部第一个参数是构造函数名，其余是变量类型</td>\n<td><code>(declare-datatypes () ((Animal dog cat fox)))</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>forall</code></td>\n<td>全称量词。<br>第一个参数是一个变量的括号组；表示变量和变量类型；<br>第二个参数是谓词函数</td>\n<td><code>(forall ((x MyType) (y MyType)) (P x y))</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>exists</code></td>\n<td>存在量词。<br>第一个参数是变量括号组；<br>第二个参数是谓词函数</td>\n<td><code>(exists ((x MyType) (y MyType)) (P x y))</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>assert</code></td>\n<td>一个参数，断言该语句为 true</td>\n<td><code>assert A</code></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"3-使用python直接作为z3的输入\"><a class=\"markdownIt-Anchor\" href=\"#3-使用python直接作为z3的输入\"></a> 3. 使用python直接作为z3的输入</h2>\n<p>相关api如下，或参考该<a href=\"https://z3prover.github.io/api/html/namespacez3py.html#func-members\">网站</a>：</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>api</th>\n<th>解释</th>\n<th>例子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>结算器</td>\n<td><code>Solver()</code></td>\n<td>获取结算器</td>\n<td><code>s = z3.Solver()</code></td>\n</tr>\n<tr>\n<td>变量声明</td>\n<td>布尔：<code>Bool(name)</code><br>整型：<code>Int(name)</code></td>\n<td><code>name</code>是一个字符串，表示变量名字</td>\n<td><code>A = z3.Bool('A')</code><br><code>a = z3.Int('a')</code></td>\n</tr>\n<tr>\n<td>变量类型</td>\n<td>布尔：<code>BoolSort()</code><br>整型：<code>IntSort()</code></td>\n<td>用于函数类型声明</td>\n<td></td>\n</tr>\n<tr>\n<td>布尔操作符</td>\n<td>逻辑与：<code>And(?, ??, ??)</code><br>逻辑或：<code>Or(??, ??, ..., ??)</code><br>逻辑否：<code>Not(??)</code><br>逻辑推理：<code>Implies(??, ??)</code><br>逻辑等于：<code>?? == ??</code></td>\n<td>返回<code>True</code>或者<code>False</code></td>\n<td><code>And(A, B, C)</code><br><code>A == B</code></td>\n</tr>\n<tr>\n<td>非布尔操作符</td>\n<td>1. 可以直接使用Python操作符 <code>+, &gt;, &gt;=</code> 等<br>2. 求和：<code>z3.Sum([])</code>，参数是数组<br>3. 三元运算符：<code>z3.If(A, B, C)</code>，相当于 <code>A ? B : C</code></td>\n<td>返回数值</td>\n<td><code>a + b</code></td>\n</tr>\n<tr>\n<td>函数</td>\n<td><code>Function(name, paraType, ..., paraType, returnType)</code></td>\n<td>函数名、参数类型、返回类型<br>类型使用变量类型</td>\n<td>1. <code>OnTop = Function('OnTop', IntSort(), IntSort(), BoolSort())</code><br>2. <code>s3.add(OnTop(A, B))</code></td>\n</tr>\n<tr>\n<td>断言/公式输入</td>\n<td><code>Solver().add(&lt;formula&gt;)</code></td>\n<td>每一个 <code>add</code> 相当于加入一个断言</td>\n<td><code>s.add(And(A, B))</code></td>\n</tr>\n<tr>\n<td>推理</td>\n<td><code>Solver().check()</code></td>\n<td>返回是否满足<br>1. <code>z3.sat</code> 满足<br>2. <code>z3.unsat</code> 不满足</td>\n<td><code>if s.check() == z3.sat:</code></td>\n</tr>\n<tr>\n<td>模型输出</td>\n<td><code>Solver().model()</code><br><code>.model().eval(??)</code></td>\n<td>1. 返回符合断言的一种模型<br>2. 返回模型里的特定变量，??是python的变量</td>\n<td><code>print(s.model())</code><br><code>print(s.model().eval(A))</code></td>\n</tr>\n<tr>\n<td>量词</td>\n<td><code>ForAll(list, fun(param, ..., param))</code><br><code>Exists(list, fun(param, ..., param))</code></td>\n<td>1. <code>list</code> 是量词参数，使用的应该是python的变量<br>2. <code>fun</code> 是定义的Function()函数</td>\n<td><code>x = z3.Int('x')</code><br><code>y = z3.Int('y')</code><br><code>P = z3.Function('P', z3.IntSort(), z3.IntSort(), z3.BoolSort())</code><br><code>s.add(z3.ForAll([x, y], P(x, y)))</code></td>\n</tr>\n<tr>\n<td>枚举型</td>\n<td>创建<br><code>type = Datatype(type_name)</code><br><code>type.declare(param_name)</code><br><code>type = type.create()</code><br><br>访问<br><code>type.param_name</code><br><code>type.constructor(int)()</code><br><code>z3.Const(const_name, type)</code></td>\n<td>创建类型及其应用</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"4-技巧\"><a class=\"markdownIt-Anchor\" href=\"#4-技巧\"></a> 4. 技巧</h2>\n<ul>\n<li>证明蕴含(entailment):</li>\n</ul>\n<p>Z3只能证明可满足性，即是否存在某一种例子可以使得所有断言都成立，也可以说是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∃</mi><mi>J</mi><mo separator=\"true\">,</mo><mi>J</mi><mo>⊨</mo><mi>S</mi><mo>∧</mo><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\exists J, J \\models S \\land \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.999em;vertical-align:-0.249em;\"></span><span class=\"mord\">∃</span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊨</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span>。<br />\n但是无法直接证明蕴含，即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>J</mi><mo separator=\"true\">,</mo><mi>J</mi><mo>⊨</mo><mi>S</mi><mo>→</mo><mi>J</mi><mo>⊨</mo><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\forall J, J \\models S \\rightarrow J \\models \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.999em;vertical-align:-0.249em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊨</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.999em;vertical-align:-0.249em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊨</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span>。</p>\n<p>简单的说就是只能证明存在，不能证明全部。<br />\n此时我们可以将待查证的公式 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>⊨</mo><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">S \\models \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.999em;vertical-align:-0.249em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊨</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 变成 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>∧</mo><mi mathvariant=\"normal\">¬</mi><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">S \\land \\neg \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∧</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 不可满足，将我们想要证明的公式 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 反转 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">¬</mi><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\neg \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">¬</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 再证明是否是不可满足的即可。</p>\n<ul>\n<li>增加语句的数量/减少限制从而提高效率</li>\n</ul>\n<p>例如要想一个队列中不能有重复的数，可以想到语句为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo separator=\"true\">,</mo><mi>x</mi><mo mathvariant=\"normal\">≠</mo><mi>y</mi><mo>→</mo><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo mathvariant=\"normal\">≠</mo><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\forall x, y, x \\neq y \\rightarrow list(x) \\neq list(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span><br />\n很明显这个语句的声明复杂度是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Θ</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Θ(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">Θ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>可以修改为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub><mo mathvariant=\"normal\">≠</mo><msub><mi>m</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>&lt;</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">m_i \\neq m_k, \\forall i &lt; k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>&lt;</mo><mi>k</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">1 &lt; k \\leq n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> 进行枚举。<br />\n例如长度为 3 的队列中，语句表示为：<br />\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>1</mn></msub><mo mathvariant=\"normal\">≠</mo><msub><mi>m</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">k = 2, m_1 \\neq m_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><br />\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>3</mn><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>1</mn></msub><mo mathvariant=\"normal\">≠</mo><msub><mi>m</mi><mn>3</mn></msub><mo separator=\"true\">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo mathvariant=\"normal\">≠</mo><msub><mi>m</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">k = 3, m_1 \\neq m_3, m_2 \\neq m_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><br />\n时间复杂度为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>，效率要比 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Θ</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Θ(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">Θ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 好得多。</p>\n<hr />\n<p>考虑代表表：</p>\n<ul>\n<li>\n<p>一旦决定一个代表解的时候：</p>\n<ul>\n<li>引入符号(notation)</li>\n<li>定义规则</li>\n<li>定义参数</li>\n</ul>\n</li>\n<li>\n<p>公式顺序为：</p>\n<ul>\n<li>辅助符号 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>，例如集合，在公式上方定义。</li>\n<li>每项规则都单独书写的定义文。</li>\n<li>如果引用参数，每个参数的数域范围要在定义域右侧定义。\n<ul>\n<li>例如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub><mo mathvariant=\"normal\">≠</mo><msub><mi>m</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>&lt;</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">m_i \\neq m_k, \\forall i &lt; k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">i, k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 是参数而不是限制。</li>\n</ul>\n</li>\n<li>公式索引在括号中给出，以供以后引用（即使从未引用过这个公式，也给出索引）\n<ul>\n<li>使用 <code>equation (i)</code> 引用单个公式。</li>\n<li>使用 <code>formulation (i)-(j)</code> 引用多个公式。</li>\n</ul>\n</li>\n<li>非逻辑符号定义在公式末尾。\n<ul>\n<li>包括定义域 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">D</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{D}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span>，例如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">D</mi><mo>=</mo><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{D} = \\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">D</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">N</span></span></span></span></span></li>\n</ul>\n</li>\n<li>公式中的一行行在公式下面公式下方进行解释。\n<ul>\n<li>例如 <code>equation (1) define ... rules</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"二-or-tools-python库\"><a class=\"markdownIt-Anchor\" href=\"#二-or-tools-python库\"></a> 二. OR-Tools python库</h1>\n<h2 id=\"1-安装-2\"><a class=\"markdownIt-Anchor\" href=\"#1-安装-2\"></a> 1. 安装</h2>\n<p><code>pip install ortools</code></p>\n<h2 id=\"2-相关api\"><a class=\"markdownIt-Anchor\" href=\"#2-相关api\"></a> 2. 相关api</h2>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>api</th>\n<th>解释</th>\n<th>样例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>模型</td>\n<td><code>cp_model.CpModel()</code></td>\n<td>模型，用于输入限制</td>\n<td><code>model = cp_model.CpModel()</code></td>\n</tr>\n<tr>\n<td>求解器</td>\n<td><code>cp_model.CpSolver()</code><br><code>solver.Solve(model)</code><br><code>solver.Value(var)</code></td>\n<td>获取求解器和求解器<br><code>cp_model.OPTIMAL</code>: 最佳的<br><code>cp_model.FEASIBLE</code>: 可行的</td>\n<td><code>solver = cp_model.CpSolver()</code><br><code>status = solver.Solve(model)</code></td>\n</tr>\n<tr>\n<td>变量声明</td>\n<td>整型: <code>model.NewIntVar(min, max, name)</code><br>布尔: <code>model.NewBoolVar(name)</code></td>\n<td><code>min</code> 最小值, <code>max</code> 最大值,<br><code>name</code> 是变量名</td>\n<td>整型: <code>x = model.NewIntVar(0, 10, 'x')</code><br>布尔: <code>a = model.NewBoolVar('a')</code></td>\n</tr>\n<tr>\n<td>一般限制</td>\n<td><code>model.Add(constraint)</code></td>\n<td>限制可以是 python 相关语法，<br>不能添加变量。如果要添加某个变量为 <code>true</code>，应该写为 <code>a == 1</code></td>\n<td><code>model.Add(x &gt; y)</code></td>\n</tr>\n<tr>\n<td>推理限制</td>\n<td><code>model.Add(con).OnlyEnforceIf(a)</code><br><code>model.AddImplication(a, b)</code>（bool only）</td>\n<td>如果 <code>a</code> 成立，那么 <code>con</code> 才成立<br>等价于 a → con<br>只能用于在线性限制中，如 <code>Add()</code>, <code>AddBoolOr</code>, <code>AddBoolAnd</code></td>\n<td><code>model.Add(x &gt; y).OnlyEnforceIf(a)</code></td>\n</tr>\n<tr>\n<td>不等于限制</td>\n<td><code>model.AddAllDifferent([])</code></td>\n<td><code>[]</code> 内部的所有变量都不相同</td>\n<td><code>model.AddAllDifferent([a, b, c])</code></td>\n</tr>\n<tr>\n<td>布尔限制</td>\n<td>或: <code>model.AddBoolOr([])</code><br>否定: <code>bool_var.Not()</code></td>\n<td><code>[]</code> 内部的所有变量使用或运算</td>\n<td><code>model.AddBoolOr([a, b, c])</code></td>\n</tr>\n<tr>\n<td>最大最小值限制</td>\n<td>最大值: <code>model.AddMaxEquality(var, list)</code><br>最小值: <code>model.AddMinEquality(var, list)</code></td>\n<td><code>var</code> 是 <code>list</code> 中的最大或者最小值</td>\n<td><code>model.AddMaxEquality(a, [b, c, d])</code></td>\n</tr>\n<tr>\n<td>属于内部值限制</td>\n<td><code>model.AddAllowedAssignments(list, set)</code></td>\n<td><code>list</code> 所有值必须在 <code>set</code> 中</td>\n<td><code>model.AddAllowedAssignments([a, b], [c])</code></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"3-技巧\"><a class=\"markdownIt-Anchor\" href=\"#3-技巧\"></a> 3. 技巧</h2>\n<ul>\n<li>布尔变量与语句链接：\n<ul>\n<li>布尔无法直接赋值为相关符号操作，例如 <code>a == (b &gt; c)</code> 是错误的。</li>\n<li>布尔应该使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⟺</mo></mrow><annotation encoding=\"application/x-tex\">\\Longleftrightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mrel\">⟺</span></span></span></span> 进行赋值。如上一个例子，可以转化为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>⟺</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo>&gt;</mo><mi>c</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a \\Longleftrightarrow (b &gt; c)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>OrTool 中没有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⟺</mo></mrow><annotation encoding=\"application/x-tex\">\\Longleftrightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mrel\">⟺</span></span></span></span>，但是有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span>。那么上述的代码就可以为：</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">model.Add(b &gt; c).OnlyEnforceIf(a)</span><br><span class=\"line\">model.Add(b &lt;= c).OnlyEnforceIf(a.Not())</span><br></pre></td></tr></table></figure>\n<ul>\n<li>可以使用 <code>sum</code> 计算布尔值为 <code>True</code> 的数量。</li>\n</ul>\n<hr />\n<p><a href=\"%E7%AC%94%E8%AE%B0%2F%E7%AC%A6%E5%8F%B7%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%2F%E7%AC%A6%E5%8F%B7%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AF%BC%E8%88%AA\">&lt;返回符号人工智能导航</a></p>\n","feature":false,"text":"有关可以寻找 FOL 和 CSP 问题的可满足性解释的python库介绍。...","permalink":"/post/笔记/符号人工智能/编程库","photos":[],"count_time":{"symbolsCount":"5.6k","symbolsTime":"5 mins."},"categories":[{"name":"笔记-符号人工智能","slug":"笔记-符号人工智能","count":5,"path":"api/categories/笔记-符号人工智能.json"}],"tags":[{"name":"Symbolic Artificial Intelligence","slug":"Symbolic-Artificial-Intelligence","count":6,"path":"api/tags/Symbolic-Artificial-Intelligence.json"},{"name":"z3","slug":"z3","count":1,"path":"api/tags/z3.json"},{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"},{"name":"Or-Tools","slug":"Or-Tools","count":1,"path":"api/tags/Or-Tools.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%80-z3-python%E5%BA%93\"><span class=\"toc-text\"> 一. Z3 python库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85\"><span class=\"toc-text\"> 1. 安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E4%BD%BF%E7%94%A8-smt2-%E4%BD%9C%E4%B8%BAz3%E7%9A%84%E8%BE%93%E5%85%A5\"><span class=\"toc-text\"> 2. 使用 smt2 作为z3的输入</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E4%BD%BF%E7%94%A8python%E7%9B%B4%E6%8E%A5%E4%BD%9C%E4%B8%BAz3%E7%9A%84%E8%BE%93%E5%85%A5\"><span class=\"toc-text\"> 3. 使用python直接作为z3的输入</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-%E6%8A%80%E5%B7%A7\"><span class=\"toc-text\"> 4. 技巧</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%8C-or-tools-python%E5%BA%93\"><span class=\"toc-text\"> 二. OR-Tools python库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85-2\"><span class=\"toc-text\"> 1. 安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E7%9B%B8%E5%85%B3api\"><span class=\"toc-text\"> 2. 相关api</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E6%8A%80%E5%B7%A7\"><span class=\"toc-text\"> 3. 技巧</span></a></li></ol></li></ol>","author":{"name":"zExNocs","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"<p>一个喜欢摸鱼的人。<br>去码头整点薯条。</p>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/img/svg/github.svg","link":"https://github.com/zExNocs"},"bilibili":{"icon":"/img/svg/bilibili.svg","link":"https://space.bilibili.com/13423200"},"steam":{"icon":"/img/svg/steam.svg","link":"https://steamcommunity.com/id/zExNocs/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"问题-规划 Planning","uid":"fe24996d1d2428bc217d0b396f632e99","slug":"笔记/问题/规划","date":"2024-10-18T10:00:15.000Z","updated":"2025-11-15T17:59:44.826Z","comments":true,"path":"api/articles/笔记/问题/规划.json","keywords":null,"cover":"/img/post/笔记/问题/规划/cover.png","text":"有关规划问题的定义和例子...","permalink":"/post/笔记/问题/规划","photos":[],"count_time":{"symbolsCount":998,"symbolsTime":"1 mins."},"categories":[{"name":"笔记-问题","slug":"笔记-问题","count":3,"path":"api/categories/笔记-问题.json"}],"tags":[{"name":"Planning","slug":"Planning","count":1,"path":"api/tags/Planning.json"},{"name":"Bayesian Network","slug":"Bayesian-Network","count":1,"path":"api/tags/Bayesian-Network.json"}],"author":{"name":"zExNocs","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"<p>一个喜欢摸鱼的人。<br>去码头整点薯条。</p>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/img/svg/github.svg","link":"https://github.com/zExNocs"},"bilibili":{"icon":"/img/svg/bilibili.svg","link":"https://space.bilibili.com/13423200"},"steam":{"icon":"/img/svg/steam.svg","link":"https://steamcommunity.com/id/zExNocs/"}}}},"feature":false},"next_post":{"title":"SAI-描述逻辑","uid":"fe7944109dd5437e82fba961634fce51","slug":"笔记/符号人工智能/描述逻辑","date":"2024-10-18T10:00:04.000Z","updated":"2025-11-15T13:30:59.862Z","comments":true,"path":"api/articles/笔记/符号人工智能/描述逻辑.json","keywords":null,"cover":"/img/post/笔记/符号人工智能/描述逻辑/cover.jpg","text":"是围绕对象的类别构建的知识的代表。...","permalink":"/post/笔记/符号人工智能/描述逻辑","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"笔记-符号人工智能","slug":"笔记-符号人工智能","count":5,"path":"api/categories/笔记-符号人工智能.json"}],"tags":[{"name":"Symbolic Artificial Intelligence","slug":"Symbolic-Artificial-Intelligence","count":6,"path":"api/tags/Symbolic-Artificial-Intelligence.json"},{"name":"Description logics","slug":"Description-logics","count":1,"path":"api/tags/Description-logics.json"},{"name":"Attributive Concept Language with Complements","slug":"Attributive-Concept-Language-with-Complements","count":1,"path":"api/tags/Attributive-Concept-Language-with-Complements.json"},{"name":"ALC","slug":"ALC","count":1,"path":"api/tags/ALC.json"},{"name":"DL","slug":"DL","count":1,"path":"api/tags/DL.json"}],"author":{"name":"zExNocs","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"<p>一个喜欢摸鱼的人。<br>去码头整点薯条。</p>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/img/svg/github.svg","link":"https://github.com/zExNocs"},"bilibili":{"icon":"/img/svg/bilibili.svg","link":"https://space.bilibili.com/13423200"},"steam":{"icon":"/img/svg/steam.svg","link":"https://steamcommunity.com/id/zExNocs/"}}}},"feature":false}}